<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    span {
      padding-left: 10px;
      padding-right: 10px;
    }

    table {
      width: 100%;
    }

    td {
      border: 1px solid #000
    }
  </style>
  <script>
    window.onload = function () {
      var boxes = document.querySelectorAll('div');
      document.body.onmouseup = function () {
        setTimeout(function () {
          var selection = document.getSelection();
          var rawRange = selection.getRangeAt(0);
          console.log(rawRange);
          selection.removeAllRanges();

          var range = document.createRange();
          var node = boxes[0].childNodes[0];
          range.setStart(node, 0);
          range.setEnd(node, node.textContent.length);
          selection.addRange(range);

          // range.selectNodeContents(boxes[1]);
          // selection.addRange(range.cloneRange());
          //
          // range.selectNodeContents(boxes[2]);
          // range.setStartBefore(boxes[2]);
          // selection.addRange(range.cloneRange());
          //
          // range.selectNodeContents(boxes[3]);
          // range.setEndAfter(boxes[3]);
          // selection.addRange(range.cloneRange());
          console.log(range);
        }, 200);
      }
    }
  </script>
</head>
<body contenteditable>
<p>
  <strong>aaabbbaaa</strong>
  <strong><strong>aaa</strong>bbb<strong>aaa</strong></strong>
  <strong>aaa</strong>bbb<strong>aaa</strong>
</p>

<div>1234<span>fdsad<i>fdsafd</i></span></div>
<table style="border: 1px solid #000">
  <tbody>
  <tr>
    <td colspan="2">1</td>
    <td>1</td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2</td>
    <td>2</td>
    <td>2</td>
  </tr>
  </tbody>
</table>
</body>
</html>
